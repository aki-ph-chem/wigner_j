\subsection{和を取る範囲について}

先程も述べたように$z$の範囲は$z$が絡んでくる階乗の中身(階乗される数値)の数値が負にならない範囲である。
ここで$z$が絡む階乗の中身すなわち(\ref{cg_fact})のシグマの中の数値が正となる条件から以下の連立不等式が得られる。

\begin{align}
    \begin{cases}
        z \ge 0  \tag{a}\\ 
        j_1 + j_2 - j_3 \ge z \\ 
        j_1 - m_1 \ge z \\
        j_2 + m_2 \ge z \\
        -j_3 + j_2 - m_1 \le z \\
        -j_3 + j_1 + m_2 \le z
    \end{cases}
\end{align}

%まず、$z \ge 0$より、最後の2式からは範囲は絞られない。
まず、$z$の最大値を考えよう。
$z \ge 0$の次から３個の条件式について考える。この3式の左辺のうち最小のものを考える。
$z$が、この最小の値から引かれても不等式を満たすならば、それよりも大きな値から$z$を引いた場合でも不等式を満たす。
これより、$z$の最大値は３式の左辺の最小値である。

\begin{align}
    z_{\text{max}} = \min\{j_1 + j_2 - j_3, j_1 - m_1, j_2 + m_2\}
\end{align}

最後に最小値を考えよう。
最後の二式の左辺が最大のものを考える。$z$が、この最大値から値を引かれても不等式を満たすならば、それよりも小さい値を$z$から引いても
不等式満たす。ここで第一式で$z \ge 0$を要求しているので結果として以下のように$0$と二式の左辺の値の最大値として得られる。

\begin{align}
    z_{\text{min}} = \max\{0, -j_3 + j_2 - m_1, -j_3 + j_1 + m_2\}
\end{align}


ただ、この最小値の議論をせずに、最小値を$0$として計算している実装も存在した。

\begin{comment}
また$n_{min},n_{max}$はそれぞれ以下で定義する
\begin{align}
    \begin{cases}
        n_{\text{min}} &= \max\{0,J_2 + m_2 - (J_3 + m_3), J_1 - m_1 - (J_3 - m_3)\} \\ 
                       &= \max\{0,J_2 - J_3 - m_1, J_1 - J_3 + m_2 \} \\ 
        n_{\text{max}} &= \min\{J_1 + J_2 - J_3, J_2 + m_2, J_1 - m_1\} \\ 
    \end{cases}
\end{align}
\end{comment}
